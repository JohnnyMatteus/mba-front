(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa918"],{1223:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-card",[i("v-card-title",[e._v(" Gestão de papeis ")]),i("v-divider",{staticClass:"mt-4"}),i("v-card-text",{staticClass:"d-flex align-center flex-wrap pb-0"},[i("v-text-field",{staticClass:"user-search me-3 mb-4",attrs:{placeholder:"Pesquisar",outlined:"","hide-details":"",dense:""},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),i("v-spacer"),i("div",{staticClass:"d-flex align-center flex-wrap"},[i("v-btn",{staticClass:"mb-4 me-3",attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.insert()}}},[i("v-icon",[e._v(e._s(e.icons.mdiPlus))]),i("span",[e._v("Novo papel")])],1),i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"mb-4",attrs:{color:"secondary",outlined:""}},"v-btn",s,!1),a),[i("v-icon",{staticClass:"me-1",attrs:{size:"17"}},[e._v(" "+e._s(e.icons.mdiExportVariant)+" ")]),i("span",[e._v("Exportar")])],1)]}}])},[i("v-list",[i("v-list-item",[i("v-list-item-title",[i("v-icon",{staticClass:"me-2",attrs:{size:"20"}},[e._v(" "+e._s(e.icons.mdiFilePdfBox)+" ")]),i("span",[e._v("PDF")])],1)],1),i("v-list-item",[i("v-list-item-title",[i("v-icon",{staticClass:"me-2",attrs:{size:"20"}},[e._v(" "+e._s(e.icons.mdiFileExcel)+" ")]),i("span",[e._v("Excel")])],1)],1)],1)],1)],1)],1),i("v-data-table",{attrs:{headers:e.tableColumns,items:e.rolesListTable,"server-items-length":e.totalRoleListTable,loading:e.loading,"show-select":""},scopedSlots:e._u([{key:"item.created_at",fn:function(t){var a=t.item;return[i("span",[e._v(e._s(e._f("dateTimeFormatBr")(a.created_at)))])]}},{key:"item.updated_at",fn:function(t){var a=t.item;return[i("span",[e._v(e._s(e._f("dateTimeFormatBr")(a.created_at)))])]}},{key:"item.actions",fn:function(t){var a=t.item;return[i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[i("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),a),[i("v-icon",[e._v(e._s(e.icons.mdiDotsVertical))])],1)]}}],null,!0)},[i("v-list",[i("v-list-item",{on:{click:function(t){return e.show(a)}}},[i("v-list-item-title",[i("v-icon",{staticClass:"me-2",attrs:{size:"20"}},[e._v(" "+e._s(e.icons.mdiEyeOutline)+" ")]),i("span",[e._v("visualizar")])],1)],1),i("v-list-item",{on:{click:function(t){return t.stopPropagation(),e.edit(a)}}},[i("v-list-item-title",[i("v-icon",{staticClass:"me-2",attrs:{size:"20"}},[e._v(" "+e._s(e.icons.mdiPencilOutline)+" ")]),i("span",[e._v("Editar")])],1)],1),i("v-list-item",{on:{click:function(t){return e.remover(a)}}},[i("v-list-item-title",[i("v-icon",{staticClass:"me-2",attrs:{size:"20"}},[e._v(" "+e._s(e.icons.mdiDeleteOutline)+" ")]),i("span",[e._v("Delete")])],1)],1)],1)],1)]}}],null,!0),model:{value:e.selectedRows,callback:function(t){e.selectedRows=t},expression:"selectedRows"}})],1),i("v-navigation-drawer",{attrs:{value:e.isAddPapel,temporary:"",touchless:"",right:!e.$vuetify.rtl,width:e.$vuetify.breakpoint.smAndUp?350:"100%",app:""}},[i("v-card",{attrs:{height:"100%"}},[i("div",{staticClass:"drawer-header d-flex align-center mb-4"},[i("span",{staticClass:"font-weight-semibold text-base text--primary"},[e._v(e._s(e.indexEdicao?"Editar "+e.formTitle:"Cadastrar "+e.formTitle)+" ")]),i("v-spacer"),i("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.closeModal()}}},[i("v-icon",{attrs:{size:"22"}},[e._v(" "+e._s(e.icons.mdiClose)+" ")])],1)],1),i("v-card-text",[i("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("v-text-field",{attrs:{rules:[e.validators.required],outlined:"",dense:"",label:"Nome","hide-details":"auto","data-vv-as":"Nome"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),i("div",{staticClass:"col-12"},[i("v-autocomplete",{attrs:{rules:[e.validators.required],items:e.permissions,"item-text":"name","item-value":"name",label:"Permissões",outlined:"","hide-details":"auto","data-vv-as":"Permissões",multiple:"",chips:"","small-chips":""},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,s=t.index;return[0===s?i("v-chip",[i("span",[e._v(e._s(a.name))])]):e._e(),1===s?i("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.selectedPermission&&e.selectedPermission.length-1)+" outros)")]):e._e()]}},{key:"prepend-item",fn:function(){return[i("v-list-item",{attrs:{ripple:""},on:{click:e.toggle}},[i("v-list-item-action",[i("v-icon",{attrs:{color:e.selectedPermission.length>0?"primary":""}},[e._v(" "+e._s(e.icon)+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[e._v(" Selecionar todos ")])],1)],1),i("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.selectedPermission,callback:function(t){e.selectedPermission=t},expression:"selectedPermission"}})],1),i("div",{staticClass:"col-6"},[i("v-btn",{staticClass:"me-3",attrs:{color:"primary",type:"submit"}},[e._v(" Adicionar ")])],1),i("div",{staticClass:"col-6"},[i("v-btn",{attrs:{color:"secondary",outlined:"",type:"reset"},on:{click:function(t){return e.closeModal()}}},[e._v(" Fechar ")])],1)])])],1)],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogRemove,callback:function(t){e.dialogRemove=t},expression:"dialogRemove"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[e._v(" Deseja realmente remover este item ? ")]),i("v-card-text",[e._v("Todas informações serão removidas da base de dados.")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.closeModalRemover()}}},[e._v(" Fechar ")]),i("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.removerItem()}}},[e._v(" Apagar ")])],1)],1)],1)],1)],1)},s=[],o=i("ade3"),n=i("b1f8"),l=(i("d81d"),i("b0c0"),i("4360")),r=i("94ed"),c=i("ed09"),d=(i("d3b7"),i("be3b")),u={namespaced:!0,state:{roleList:[],permissionsList:[],item:[],indexEdicao:!1},getters:{getRoleList:function(e){return e.roleList},getPermissionsList:function(e){return e.permissionsList},getItem:function(e){return e.item},getIndexEdicao:function(e){return e.indexEdicao}},mutations:{setRoleList:function(e,t){e.roleList=t},setPermissionsList:function(e,t){e.permissionsList=t},setItem:function(e,t){e.item=t},setIndexEdicao:function(e,t){e.indexEdicao=t}},actions:{fetchRoles:function(e){return new Promise((function(e,t){d["a"].get("/v1/acl/role").then((function(t){return e(t)}))["catch"]((function(e){return t(e)}))}))},fetchRole:function(e,t){var i=t.id;return new Promise((function(e,t){d["a"].get("/v1/acl/role/".concat(i)).then((function(t){return e(t)}))["catch"]((function(e){return t(e)}))}))},addRole:function(e,t){return new Promise((function(e,i){d["a"].post("/v1/acl/role",t).then((function(t){return e(t)}))["catch"]((function(e){return i(e)}))}))},editRole:function(e,t){var i=t.id,a=t.dados;return new Promise((function(e,t){d["a"].put("/v1/acl/role/".concat(i),a).then((function(t){return e(t)}))["catch"]((function(e){return t(e)}))}))},removeRole:function(e,t){return new Promise((function(e,i){d["a"]["delete"]("/v1/acl/role/".concat(t)).then((function(t){return e(t)}))["catch"]((function(e){return i(e)}))}))}}},m=i("1da1");i("96cf");function v(){var e=Object(c["J"])([]),t=[{text:"NOME",value:"name"},{text:"GUARD",value:"guard_name"},{text:"DATA CADASTRO",value:"created_at"},{text:"DATA ATUALIZAÇÃO",value:"updated_at"},{text:"AÇÕES",value:"actions",align:"center",sortable:!1}],i=Object(c["J"])(""),a=Object(c["J"])(0),s=Object(c["J"])(!1),o=Object(c["J"])({sortBy:["id"],sortDesc:[!0]}),n=Object(c["J"])([]),r=Object(c["J"])([]),d=function(){l["a"].dispatch("app-roles/fetchRoles").then((function(t){var i=t.data.data;l["a"].commit("app-roles/setRoleList",i.roles),l["a"].commit("app-roles/setPermissionsList",i.permissions),e.value=i.roles,a.value=i.roles.length,n.value=i.roles.length,s.value=!1}))["catch"]((function(e){console.log(e)}))};return Object(c["A"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d();case 1:case"end":return e.stop()}}),e)})))),{rolesListTable:e,tableColumns:t,searchQuery:i,totalRoleListTable:a,loading:s,options:o,roleTotalLocal:n,selectedRows:r,fetchRoles:d}}var p=i("7f98"),f={name:"Gestao-papeis",components:{},setup:function(){var e,t="app-roles";l["a"].hasModule(t)||l["a"].registerModule(t,u),Object(c["D"])((function(){l["a"].hasModule(t)&&l["a"].unregisterModule(t)}));var i=Object(c["J"])(!1),a=Object(c["H"])({}),s=Object(c["J"])(!1),d=Object(c["J"])(null),m=Object(c["J"])({name:""}),f=Object(c["J"])(!1),b=Object(c["J"])([]),h=Object(c["J"])(!1),_=v(),x=_.rolesListTable,g=_.tableColumns,O=_.searchQuery,R=_.totalRoleListTable,j=_.loading,C=_.options,P=_.roleTotalLocal,k=_.selectedRows,w=_.fetchRoles,y=Object(c["b"])((function(){return!1===i||!0===i?"papel":void 0})),L=Object(c["b"])((function(){return l["a"].getters["app-roles/getPermissionsList"]})),A=Object(c["b"])((function(){return b.value.length===L.value.length})),E=Object(c["b"])((function(){return b.value.length>0&&!A.value})),T=Object(c["b"])((function(){return A.value?r["k"]:E.value?r["K"]:r["e"]}));function V(){this.indexEdicao=!1,this.isAddPapel=!this.isAddPapel}function D(e){this.itemData=e,this.indexEdicao=!this.indexEdicao,b.value=e.permissions,m.value=e,this.isAddPapel=!this.isAddPapel}function J(e){this.itemData=e,this.dialogRemove=!0}function S(){var e=this;l["a"].dispatch("app-roles/removeRole",this.itemData.id).then((function(){e.dialogRemove=!1,l["a"].dispatch("module/openSnackBar",{color:"success",timeout:1e4,text:"Papel removido com sucesso."})}))}function F(){this.itemData=[],this.dialogRemove=!1}function I(){m.value=[],b.value=[],l["a"].commit("app-roles/setIndexEdicao",!1),Object(n["a"])("isAddPapel")}var M=function(){d.value.validate()},B=function(){Object(c["t"])((function(){!0===A.value?b.value=[]:b.value=L.value.map((function(e){return e.name}))}))},z=function(){if(s.value){var e={name:m.value.name,permissions:b.value};i.value?l["a"].dispatch("app-roles/editRole",{id:m.value.id,dados:e}).then((function(){l["a"].dispatch("module/openSnackBar",{color:"success",timeout:1e4,text:"Papel atualizado com sucesso com sucesso."})})):l["a"].dispatch("app-roles/addRole",e).then((function(){l["a"].dispatch("module/openSnackBar",{color:"success",timeout:1e4,text:"Papel salvo com sucesso."})})),I()}else M()};return e={rolesListTable:x,tableColumns:g,searchQuery:O,totalRoleListTable:R,roleTotalLocal:P,loading:j,options:C,isAddPapel:h,selectedRows:k,formTitle:y,itemData:a,indexEdicao:i,fetchRoles:w,edit:D,insert:V,remover:J,removerItem:S,closeModalRemover:F,closeModal:I,valid:s,validate:M,form:d,onSubmit:z,dialogRemove:f,role:m},Object(o["a"])(e,"valid",s),Object(o["a"])(e,"validate",M),Object(o["a"])(e,"indexEdicao",i),Object(o["a"])(e,"selectedPermission",b),Object(o["a"])(e,"permissions",L),Object(o["a"])(e,"likesAllRole",A),Object(o["a"])(e,"likesSomeRole",E),Object(o["a"])(e,"toggle",B),Object(o["a"])(e,"validators",{required:p["a"]}),Object(o["a"])(e,"icon",T),Object(o["a"])(e,"icons",{mdiSquareEditOutline:r["P"],mdiFileDocumentOutline:r["v"],mdiDotsVertical:r["p"],mdiDeleteOutline:r["o"],mdiPlus:r["M"],mdiExportVariant:r["r"],mdiAccountOutline:r["a"],mdiPencilOutline:r["L"],mdiEyeOutline:r["t"],mdiFilePdfBox:r["y"],mdiFileExcel:r["w"],mdiClose:r["j"],mdiCloseBoxOutline:r["k"],mdiMinusBoxOutline:r["K"],mdiCheckboxBlankOutline:r["e"],mdiFoodAppleOutline:r["z"]}),e}},b=f,h=i("2877"),_=i("6544"),x=i.n(_),g=i("c6a6"),O=i("8336"),R=i("b0af"),j=i("99d9"),C=i("cc20"),P=i("8fea"),k=i("169a"),w=i("ce7e"),y=i("4bd4"),L=i("132d"),A=i("8860"),E=i("da13"),T=i("1800"),V=i("5d23"),D=i("e449"),J=i("f774"),S=i("0fd9"),F=i("2fa4"),I=i("8654"),M=Object(h["a"])(b,a,s,!1,null,null,null);t["default"]=M.exports;x()(M,{VAutocomplete:g["a"],VBtn:O["a"],VCard:R["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VChip:C["a"],VDataTable:P["a"],VDialog:k["a"],VDivider:w["a"],VForm:y["a"],VIcon:L["a"],VList:A["a"],VListItem:E["a"],VListItemAction:T["a"],VListItemContent:V["a"],VListItemTitle:V["b"],VMenu:D["a"],VNavigationDrawer:J["a"],VRow:S["a"],VSpacer:F["a"],VTextField:I["a"]})}}]);
//# sourceMappingURL=chunk-2d0aa918.c5ce247f.js.map